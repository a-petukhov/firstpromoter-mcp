# =============================================================================
# Docker Compose for Local Development
# =============================================================================
# This file makes it easy to run the MCP server locally with Docker Desktop.
#
# Usage:
#   1. Copy .env.example to .env and fill in your credentials
#   2. Run: docker compose up --build
#   3. The server will start in stdio mode
#
# For interactive testing:
#   docker compose run --rm mcp-server

version: '3.8'

services:
  mcp-server:
    # Build from the Dockerfile in current directory
    build:
      context: .
      dockerfile: Dockerfile
    
    # Container name for easy reference
    container_name: firstpromoter-mcp
    
    # Load environment variables from .env file
    env_file:
      - .env
    
    # Keep stdin open and allocate TTY for interactive mode
    # These are essential for stdio transport to work!
    stdin_open: true  # Like "docker run -i"
    tty: true         # Like "docker run -t"
    
    # For Phase 2 (HTTP mode), uncomment these:
    # ports:
    #   - "3000:3000"
    # command: ["node", "dist/index.js", "--http"]
    
    # Restart policy (for production, change to "unless-stopped")
    restart: "no"

# =============================================================================
# Future additions for Phase 5 (caching):
# =============================================================================
# 
#   # SQLite database volume for persistent caching
#   volumes:
#     - mcp-data:/app/data
# 
# volumes:
#   mcp-data:
